(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var s=a(0),c=a(2),n=a.n(c),i=a(17),r=a.n(i),l=a(26),o=a.n(l),d=a(37),j=a(3),b="update_self_userid",m="current_status",u="login_user",h="logout_user",O="switch_load",p="connect_websocket",x="switch_sidebar",f="switch_dark_mode";function g(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.ui.sidebar_open})),a=Object(j.c)((function(e){return e.ui.dark_mode}));return Object(s.jsx)("div",{className:t?"navigation active":"navigation",children:Object(s.jsx)("div",{className:"container",children:Object(s.jsx)("div",{className:"inside",children:Object(s.jsxs)("div",{className:"nav nav-tab menu",children:[Object(s.jsxs)("a",{href:"#members","data-toggle":"tab",title:"All members",children:[Object(s.jsx)("i",{className:"ti-home"}),"All Friends"]}),Object(s.jsxs)("a",{href:"#discussions","data-toggle":"tab",className:"active",title:"Chat",children:[Object(s.jsx)("i",{className:"ti-comment-alt"}),"Recent Chat"]}),Object(s.jsxs)("a",{href:"#blank",onClick:function(){return e({type:f})},id:"dark",className:"dark-theme",title:"Use Night Mode",children:[Object(s.jsx)("i",{className:"ti-wand"}),a?"Day Mode":"Night Mode"]}),Object(s.jsxs)("a",{href:"/#logout",onClick:function(){sessionStorage.clear(),window.location.reload()},className:"btn power",title:"Sign Out",children:[Object(s.jsx)("i",{className:"ti-power-off"}),"Logout"]})]})})})})}var v=function(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.auth.user.image||""}));return Object(s.jsx)("figure",{className:"setting",onClick:function(){return e({type:x})},children:Object(s.jsx)("img",{className:"avatar-xl",src:t,alt:"avatar"})})},N=function(e){return{type:b,payload:e}},y=function(e){return{type:m,payload:e}},w=function(e){return{type:u,payload:{user:e}}},k=function(){return{type:O}},_=a(39),S=a(9),I=a(40),C=a(4),L={loading:!0,isLogin:!1,isLogout:!1,user:{}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(C.a)(Object(C.a)({},e),{},{isLogin:!0,isLogout:!1,user:t.payload.user});case h:return Object(C.a)(Object(C.a)({},e),{},{isLogin:!1,isLogout:!0});case O:return Object(C.a)(Object(C.a)({},e),{},{loading:!e.loading});default:return e}},M=a(23),A={rooms:[],activeRoomId:0,self_user_id:0,textValue:"",ws:null,wsPath:"ws://127.0.0.1:8000/ws/v1/?token=ca80a05c0c91e871d29ef017b8f2b488955407eb"},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(C.a)(Object(C.a)({},e),{},{self_user_id:t.payload});case"save_rooms":return Object(C.a)(Object(C.a)({},e),{},{rooms:[].concat(Object(M.a)(e.rooms),Object(M.a)(t.payload))});case m:return Object(C.a)(Object(C.a)({},e),{},{activeRoomId:t.payload});case"upadte_ws":return Object(C.a)(Object(C.a)({},e),{},{ws:t.payload});case"update_message":var a=t.payload.roomId,s=Object(C.a)(Object(C.a)({},e),{},{rooms:e.rooms.map((function(e){return e.id===a?Object(C.a)(Object(C.a)({},e),{},{chats:[].concat(Object(M.a)(e.chats),[t.payload])}):e}))});return s;case"online_status":var c=Object(C.a)(Object(C.a)({},e),{},{rooms:e.rooms.map((function(a){return a.id===t.payload.roomId&&t.payload.user.id!==e.self_user_id?Object(C.a)(Object(C.a)({},a),{},{user:t.payload.user}):a}))});return c;case"update_message_status":return Object(C.a)(Object(C.a)({},e),{},{rooms:e.rooms.map((function(a){return a.id===t.payload.roomId&&t.payload.user.id!==e.self_user_id?Object(C.a)(Object(C.a)({},a),{},{chats:a.chats.map((function(e){return Object(C.a)(Object(C.a)({},e),{},{seen:!0})}))}):a}))});case p:return Object(C.a)(Object(C.a)({},e),{},{ws:t.payload});default:return e}},E={sidebar_open:!1,dark_mode:!1},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(C.a)(Object(C.a)({},e),{},{sidebar_open:!e.sidebar_open});case f:return Object(C.a)(Object(C.a)({},e),{},{dark_mode:!e.dark_mode});default:return e}},F=Object(S.c)({auth:D,rooms:B,ui:R}),J=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||S.d,K=Object(S.e)(F,J(Object(S.a)(I.a)));var q=a(14),z=a.n(q),G="https://secret-zone.herokuapp.com/api/v1",T=function(){return z.a.get(G+"/user/",{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("access"))}})};function U(e){z.a.post(G+"/token/refresh/",{refresh:sessionStorage.getItem("refresh")}).then((function(t){200===t.status?(console.log(t,"refresh response:async.js:11"),sessionStorage.setItem("access",t.data.access),T().then((function(t){200===t.status?(e(k()),e(w(t.data)),e(N(t.data.id))):P(e)})).catch((function(t){console.log(t.response,"refresh:async.js:28"),P(e)}))):(console.log("response not 200:async.js:14"),P(e))})).catch((function(t){console.log(t.response,"refresh:async.js:38"),P(e)}))}function P(e){sessionStorage.clear(),e({type:h}),e(k())}var Q=function(){return function(e){e(function(e){return{type:p,payload:e}}(function(){var e=new _.a("wss://secret-zone.herokuapp.com/ws/v1/?token="+sessionStorage.getItem("access"));return e.addEventListener("message",(function(e){var t=JSON.parse(e.data);console.log(t,"websocket.js:11"),"message"===t.type?K.dispatch({type:"update_message",payload:t.message}):"online_status"===t.type?K.dispatch(function(e){return{type:"online_status",payload:e}}(t)):"update_message_status"===t.type&&K.dispatch(function(e){return{type:"update_message_status",payload:e}}(t))})),e}()))}};var V=function(e){var t=Object(j.b)(),a=Object(j.c)((function(e){return e.rooms.activeRoomId})),c=Object(j.c)((function(e){return e.rooms.ws})),n=e.room.user,i=e.room,r=i.chats[i.chats.length-1].text;return Object(s.jsxs)("a",{href:"#list-chat",onClick:function(){return(0===a||a!==i.id)&&t(function(e,t){return function(a){0!==t&&e&&e.send(JSON.stringify({type:"update_message_status",roomId:t})),a(y(t))}}(c,i.id))},className:"filterDiscussions all unread single",id:"list-chat-list","data-toggle":"list",role:"tab",children:[Object(s.jsx)("img",{className:"avatar-md",src:n.image,"data-toggle":"tooltip","data-placement":"top",title:"Michael",alt:"avatar"}),Object(s.jsx)("div",{className:n.online?"status online":"status offline"}),Object(s.jsxs)("div",{className:"data",children:[Object(s.jsx)("h5",{children:n.username}),0!==i.unseenCount?Object(s.jsx)("div",{className:"new bg-green",children:Object(s.jsxs)("span",{children:[i.unseenCount,"+"]})}):"",Object(s.jsx)("span",{children:"Sun"}),Object(s.jsxs)("p",{title:r,children:[r.substring(0,10),"..."]})]})]})};function W(){var e=Object(j.c)((function(e){return e.rooms.rooms})).map((function(e){return Object(s.jsx)(V,{room:e},e.id)}));return Object(s.jsxs)("div",{id:"discussions",className:"tab-pane fade in active show",children:[Object(s.jsx)(v,{}),Object(s.jsx)("span",{className:"logo",children:Object(s.jsx)("img",{src:"dist/img/logo.png",alt:""})}),Object(s.jsxs)("div",{className:"search",children:[Object(s.jsxs)("form",{className:"form-inline position-relative",children:[Object(s.jsx)("input",{type:"search",className:"form-control",id:"conversations",placeholder:"Search for conversations..."}),Object(s.jsx)("button",{type:"button",className:"btn btn-link loop",children:Object(s.jsx)("i",{className:"ti-search"})})]}),Object(s.jsx)("button",{className:"btn create","data-toggle":"modal","data-target":"#startnewchat",children:Object(s.jsx)("i",{className:"ti-pencil"})})]}),Object(s.jsxs)("div",{className:"list-group sort",children:[Object(s.jsx)("button",{className:"btn filterDiscussionsBtn active show","data-toggle":"list","data-filter":"all",children:"All"}),Object(s.jsx)("button",{className:"btn filterDiscussionsBtn","data-toggle":"list","data-filter":"read",children:"Favourit"}),Object(s.jsx)("button",{className:"btn filterDiscussionsBtn","data-toggle":"list","data-filter":"unread",children:"Unread"})]}),Object(s.jsxs)("div",{className:"discussions",id:"scroller",children:[Object(s.jsx)("h1",{children:"Chats"}),Object(s.jsx)("div",{className:"list-group",id:"chats",role:"tablist",children:e})]})]})}var H=function(e){var t=e.rooms.user;return Object(s.jsx)(c.Fragment,{children:Object(s.jsxs)("a",{href:"#list-chat",className:"filterMembers all online contact","data-toggle":"list",role:"tab",children:[Object(s.jsx)("img",{className:"avatar-md",src:t.image,"data-toggle":"tooltip","data-placement":"top",title:"Sarah",alt:"avatar"}),Object(s.jsx)("div",{className:"status online"}),Object(s.jsxs)("div",{className:"data",children:[Object(s.jsx)("h5",{children:t.username}),Object(s.jsx)("p",{children:t.email})]}),Object(s.jsx)("div",{className:"person-add",children:Object(s.jsx)("i",{className:"ti-user"})})]})})};function Z(){var e=Object(j.c)((function(e){return e.rooms.rooms})).map((function(e){return Object(s.jsx)(H,{rooms:e},e.id)}));return Object(s.jsxs)("div",{className:"tab-pane fade",id:"members",children:[Object(s.jsx)(v,{}),Object(s.jsx)("span",{className:"logo",children:Object(s.jsx)("img",{alt:"",src:"dist/img/logo.png"})}),Object(s.jsx)("div",{className:"search",children:Object(s.jsxs)("form",{className:"form-inline position-relative",children:[Object(s.jsx)("input",{type:"search",className:"form-control",id:"people",placeholder:"Search for people..."}),Object(s.jsx)("button",{type:"button",className:"btn btn-link loop",children:Object(s.jsx)("i",{className:"ti-search"})})]})}),Object(s.jsxs)("div",{className:"list-group sort",children:[Object(s.jsx)("button",{className:"btn filterMembersBtn active show","data-toggle":"list","data-filter":"all",children:"All"}),Object(s.jsx)("button",{className:"btn filterMembersBtn","data-toggle":"list","data-filter":"online",children:"Online"}),Object(s.jsx)("button",{className:"btn filterMembersBtn","data-toggle":"list","data-filter":"offline",children:"Offline"})]}),Object(s.jsxs)("div",{className:"contacts",children:[Object(s.jsx)("h1",{children:"Contacts"}),Object(s.jsxs)("div",{className:"btn-group add-group",role:"group",children:[Object(s.jsx)("button",{id:"btnGroupDrop1",type:"button",className:"btn btn-secondary dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:"Add +"}),Object(s.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"btnGroupDrop1",children:[Object(s.jsx)("button",{className:"dropdown-item btn","data-toggle":"modal","data-target":"#exampleModalCenter",children:"New user"}),Object(s.jsx)("button",{className:"dropdown-item btn",children:"New Group +"})]})]}),Object(s.jsx)("div",{className:"list-group",id:"contacts",role:"tablist",children:e})]})]})}var X=a(19),Y=a(20),$=a(22),ee=a(21),te=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){return Object(X.a)(this,a),t.apply(this,arguments)}return Object(Y.a)(a,[{key:"render",value:function(){return Object(s.jsxs)("div",{id:"notifications",className:"tab-pane fade",children:[Object(s.jsx)(v,{}),Object(s.jsx)("span",{className:"logo",children:Object(s.jsx)("img",{alt:"",src:"dist/img/logo.png"})}),Object(s.jsx)("div",{className:"search",children:Object(s.jsxs)("form",{className:"form-inline position-relative",children:[Object(s.jsx)("input",{type:"search",className:"form-control",id:"notice",placeholder:"Filter notifications..."}),Object(s.jsx)("button",{type:"button",className:"btn btn-link loop",children:Object(s.jsx)("i",{className:"ti-filter"})})]})}),Object(s.jsxs)("div",{className:"list-group sort",children:[Object(s.jsx)("button",{className:"btn filterNotificationsBtn active show","data-toggle":"list","data-filter":"all",children:"All"}),Object(s.jsx)("button",{className:"btn filterNotificationsBtn","data-toggle":"list","data-filter":"latest",children:"Latest"}),Object(s.jsx)("button",{className:"btn filterNotificationsBtn","data-toggle":"list","data-filter":"oldest",children:"Oldest"})]}),Object(s.jsxs)("div",{className:"notifications",children:[Object(s.jsx)("h1",{children:"Notifications"}),Object(s.jsxs)("div",{className:"list-group",id:"alerts",role:"tablist",children:[Object(s.jsxs)("a",{href:"#",className:"filterNotifications all latest notification","data-toggle":"list",children:[Object(s.jsx)("img",{className:"avatar-md",src:"dist/img/avatars/avatar-female-1.jpg","data-toggle":"tooltip","data-placement":"top",title:"Sarah",alt:"avatar"}),Object(s.jsx)("div",{className:"status online"}),Object(s.jsxs)("div",{className:"data",children:[Object(s.jsx)("p",{children:"Sarah has accepted your friend request on Talkshak."}),Object(s.jsx)("span",{children:"Oct 17, 2018"})]})]}),Object(s.jsxs)("a",{href:"#",className:"filterNotifications all latest notification","data-toggle":"list",children:[Object(s.jsx)("img",{className:"avatar-md",src:"dist/img/avatars/avatar-male-1.jpg","data-toggle":"tooltip","data-placement":"top",title:"Michael",alt:"avatar"}),Object(s.jsx)("div",{className:"status online"}),Object(s.jsxs)("div",{className:"data",children:[Object(s.jsx)("p",{children:"Michael, you have a new friend suggestion today."}),Object(s.jsx)("span",{children:"Jun 21, 2018"})]})]}),Object(s.jsxs)("a",{href:"#",className:"filterNotifications all latest notification","data-toggle":"list",children:[Object(s.jsx)("img",{className:"avatar-md",src:"dist/img/avatars/avatar-male-2.jpg","data-toggle":"tooltip","data-placement":"top",title:"james idoms",alt:"avatar"}),Object(s.jsx)("div",{className:"status online"}),Object(s.jsxs)("div",{className:"data",children:[Object(s.jsx)("p",{children:"james idoms have just sent you a new message."}),Object(s.jsx)("span",{children:"Feb 15, 2018"})]})]}),Object(s.jsxs)("a",{href:"#",className:"filterNotifications all latest notification","data-toggle":"list",children:[Object(s.jsx)("img",{className:"avatar-md",src:"dist/img/avatars/avatar-female-6.jpg","data-toggle":"tooltip","data-placement":"top",title:"Lisa Honey",alt:"avatar"}),Object(s.jsx)("div",{className:"status online"}),Object(s.jsxs)("div",{className:"data",children:[Object(s.jsx)("p",{children:"Lisa Honey has a birthday today. Wish her all the best."}),Object(s.jsx)("span",{children:"Mar 23, 2018"})]})]}),Object(s.jsxs)("a",{href:"#",className:"filterNotifications all latest notification","data-toggle":"list",children:[Object(s.jsx)("img",{className:"avatar-md",src:"dist/img/avatars/avatar-female-3.jpg","data-toggle":"tooltip","data-placement":"top",title:"Sarah",alt:"avatar"}),Object(s.jsx)("div",{className:"status online"}),Object(s.jsxs)("div",{className:"data",children:[Object(s.jsx)("p",{children:"Linda Gates has accepted your friend request on Talkshak."}),Object(s.jsx)("span",{children:"Jan 5, 2018"})]})]}),Object(s.jsxs)("a",{href:"#",className:"filterNotifications all oldest notification","data-toggle":"list",children:[Object(s.jsx)("img",{className:"avatar-md",src:"dist/img/avatars/avatar-female-5.jpg","data-toggle":"tooltip","data-placement":"top",title:"Sarah",alt:"avatar"}),Object(s.jsx)("div",{className:"status offline"}),Object(s.jsxs)("div",{className:"data",children:[Object(s.jsx)("p",{children:"Karen joye have just sent you a new message."}),Object(s.jsx)("span",{children:"Dec 22, 2017"})]})]}),Object(s.jsxs)("a",{href:"#",className:"filterNotifications all oldest notification","data-toggle":"list",children:[Object(s.jsx)("img",{className:"avatar-md",src:"dist/img/avatars/avatar-female-2.jpg","data-toggle":"tooltip","data-placement":"top",title:"Sarah",alt:"avatar"}),Object(s.jsx)("div",{className:"status offline"}),Object(s.jsxs)("div",{className:"data",children:[Object(s.jsx)("p",{children:"Michael, you have a new friend suggestion today."}),Object(s.jsx)("span",{children:"Nov 29, 2017"})]})]}),Object(s.jsxs)("a",{href:"#",className:"filterNotifications all oldest notification","data-toggle":"list",children:[Object(s.jsx)("img",{className:"avatar-md",src:"dist/img/avatars/avatar-male-3.jpg","data-toggle":"tooltip","data-placement":"top",title:"Sarah",alt:"avatar"}),Object(s.jsx)("div",{className:"status offline"}),Object(s.jsxs)("div",{className:"data",children:[Object(s.jsx)("p",{children:"Daniel Cabral have just sent you a new message."}),Object(s.jsx)("span",{children:"Sep 31, 2017"})]})]}),Object(s.jsxs)("a",{href:"#",className:"filterNotifications all oldest notification","data-toggle":"list",children:[Object(s.jsx)("img",{className:"avatar-md",src:"dist/img/avatars/avatar-male-4.jpg","data-toggle":"tooltip","data-placement":"top",title:"Sarah",alt:"avatar"}),Object(s.jsx)("div",{className:"status offline"}),Object(s.jsxs)("div",{className:"data",children:[Object(s.jsx)("p",{children:"Jhon Doe has a birthday today. Wish him all the best."}),Object(s.jsx)("span",{children:"Jul 19, 2017"})]})]})]})]})]})}}]),a}(c.Component);function ae(){var e=Object(j.c)((function(e){return e.ui.sidebar_open}));return Object(s.jsx)("div",{className:e?"sidebar slide":"sidebar",id:"sidebar",children:Object(s.jsx)("div",{className:"container",children:Object(s.jsx)("div",{className:"col-md-12",children:Object(s.jsxs)("div",{className:"tab-content",children:[Object(s.jsx)(Z,{}),Object(s.jsx)(W,{}),Object(s.jsx)(te,{})]})})})})}var se=a(12),ce=a.n(se);function ne(){var e=Object(j.b)(),t=Object(j.c)((function(e){var t=e.rooms.activeRoomId;return e.rooms.rooms.filter((function(e){return e.id===t}))[0]}));if(t){var a=t.user;return Object(s.jsx)("div",{className:"top",children:Object(s.jsx)("div",{className:"container",children:Object(s.jsx)("div",{className:"col-md-12",children:Object(s.jsxs)("div",{className:"inside",children:[Object(s.jsx)("img",{className:"avatar-md",src:a.image,"data-toggle":"tooltip","data-placement":"top",title:"Michael",alt:"avatar"}),Object(s.jsx)("div",{className:a.online?"status online":"status offline"}),Object(s.jsxs)("div",{className:"data",children:[Object(s.jsx)("h5",{children:Object(s.jsx)("a",{href:"#test",children:a.username})}),a.online?Object(s.jsx)("span",{children:"Active now"}):Object(s.jsxs)("span",{children:["Last seen ",ce()(a.lastSeen).calendar()]})]}),Object(s.jsx)("button",{className:"btn d-md-block d-none",title:"More Info",children:Object(s.jsx)("i",{className:"ti-info"})}),Object(s.jsxs)("div",{className:"dropdown",children:[Object(s.jsx)("button",{className:"btn","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:Object(s.jsx)("i",{className:"ti-view-grid"})}),Object(s.jsxs)("div",{className:"dropdown-menu dropdown-menu-right",children:[Object(s.jsxs)("a",{href:"#test",className:"dropdown-item",children:[Object(s.jsx)("i",{className:"ti-server"}),"Clear History"]}),Object(s.jsxs)("a",{href:"#test",className:"dropdown-item",children:[Object(s.jsx)("i",{className:"ti-hand-stop"}),"Block Contact"]}),Object(s.jsxs)("a",{href:"#test",className:"dropdown-item",children:[Object(s.jsx)("i",{className:"ti-trash"}),"Delete Contact"]})]})]}),Object(s.jsx)("button",{onClick:function(){return e(y(0))},className:"btn back-to-mesg",title:"Back",children:Object(s.jsx)("i",{className:"ti-arrow-right"})})]})})})})}return""}function ie(e){var t=Object(j.c)((function(e){return e.auth.user})),a=e.user,c=e.chat,n=function(e){return e.seen?Object(s.jsx)("i",{className:"ti-check-box blue"}):e.delivered?Object(s.jsx)("i",{className:"ti-check-box"}):Object(s.jsx)("i",{className:"ti-check"})};return c.user!==t.id?function(e,t){return Object(s.jsxs)("div",{className:"message",children:[Object(s.jsx)("img",{className:"avatar-md",src:e.image,"data-toggle":"tooltip","data-placement":"top",title:"Karen joye",alt:"avatar"}),Object(s.jsxs)("div",{className:"text-main",children:[Object(s.jsx)("div",{className:"text-group",children:Object(s.jsx)("div",{className:"text",children:Object(s.jsx)("p",{children:t.text})})}),Object(s.jsx)("span",{children:ce()(t.timestamp).format("LT")})]})]})}(a,c):function(e,t){return Object(s.jsx)("div",{className:"message me",children:Object(s.jsxs)("div",{className:"text-main",children:[Object(s.jsx)("div",{className:"text-group me",children:Object(s.jsx)("div",{className:"text me",children:Object(s.jsx)("p",{children:t.text})})}),Object(s.jsxs)("span",{children:[ce()(t.timestamp).format("LT")," ",n(t)]})]})})}(0,c)}function re(){var e=Object(c.useRef)(null),t=Object(j.c)((function(e){return e.rooms.activeRoomId})),a=function(t){e.current.scrollIntoView(t)},n=Object(j.c)((function(e){var t=e.rooms.activeRoomId,a=e.rooms.rooms.filter((function(e){return e.id===t}))[0];return a?a.chats.map((function(e,t){var n,i=Object(s.jsx)(ie,{chat:e,user:a.user},e.chatId);return 0===t||(e.timestamp-a.chats[t-1].timestamp)/864e5>1?Object(s.jsxs)(c.Fragment,{children:[(n=e.timestamp,Object(s.jsxs)("div",{className:"date",children:[Object(s.jsx)("hr",{}),Object(s.jsx)("span",{children:ce()(n).calendar().split(" ")[0]}),Object(s.jsx)("hr",{})]})),i]},e.chatId):i})):""}));return Object(c.useEffect)((function(){a()}),[t]),Object(c.useEffect)((function(){a({behavior:"smooth"})}),[n]),Object(s.jsx)("div",{className:"content",id:"content",children:Object(s.jsx)("div",{className:"container",children:Object(s.jsxs)("div",{className:"col-md-12",children:[n,Object(s.jsx)("div",{ref:e})]})})})}var le=a(11);function oe(){var e=Object(j.c)((function(e){return[e.rooms.ws,e.rooms.activeRoomId]})),t=Object(le.a)(e,2),a=t[0],n=t[1],i=Object(c.useState)(""),r=Object(le.a)(i,2),l=r[0],o=r[1],d=function(e){e.preventDefault(),a.send(JSON.stringify({type:"message",data:{typ:"txt",text:l,roomId:n}})),o("")};return Object(s.jsx)("div",{className:"container text-box",children:Object(s.jsx)("div",{className:"col-md-12",children:Object(s.jsxs)("div",{className:"bottom",children:[Object(s.jsxs)("form",{className:"text-area",onSubmit:d,children:[Object(s.jsx)("textarea",{onChange:function(e){return o(e.target.value)},onKeyDown:function(e){13!==e.keyCode||e.shiftKey||d(e)},value:l,className:"form-control",placeholder:"Start typing...",rows:1}),Object(s.jsx)("div",{className:"add-smiles",children:Object(s.jsx)("span",{title:"add icon",className:"em em-blush"})}),Object(s.jsxs)("div",{className:"smiles-bunch",children:[Object(s.jsx)("i",{className:"em em---1"}),Object(s.jsx)("i",{className:"em em-smiley"})]}),Object(s.jsx)("button",{type:"submit",className:"btn send",children:Object(s.jsx)("i",{className:"ti-location-arrow"})})]}),Object(s.jsxs)("label",{children:[Object(s.jsx)("input",{type:"file"}),Object(s.jsx)("span",{className:"btn attach",children:Object(s.jsx)("i",{className:"ti-clip"})})]})]})})})}function de(){var e=Object(j.c)((function(e){return e.rooms.activeRoomId}));return Object(s.jsx)("div",{className:0!==e?"main show":"main",id:"chat-dialog",children:Object(s.jsx)("div",{className:"tab-content",id:"nav-tabContent",children:Object(s.jsx)("div",{className:"babble tab-pane fade active show",id:"list-chat",role:"tabpanel","aria-labelledby":"list-chat-list",children:Object(s.jsxs)("div",{className:"chat",id:"chat1",children:[Object(s.jsx)(ne,{}),Object(s.jsx)(re,{}),Object(s.jsx)(oe,{})]})})})})}function je(){return Object(s.jsx)("div",{className:"modal fade",id:"exampleModalCenter",tabIndex:-1,role:"dialog","aria-hidden":"true",children:Object(s.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(s.jsxs)("div",{className:"requests",children:[Object(s.jsxs)("div",{className:"title",children:[Object(s.jsx)("h1",{children:"Add your friends"}),Object(s.jsx)("button",{type:"button",className:"btn","data-dismiss":"modal","aria-label":"Close",children:Object(s.jsx)("i",{className:"ti-close"})})]}),Object(s.jsx)("div",{className:"content",children:Object(s.jsxs)("form",{children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"user",children:"Username:"}),Object(s.jsx)("input",{type:"text",className:"form-control",id:"user",placeholder:"Add recipient...",required:!0}),Object(s.jsxs)("div",{className:"user",id:"contact",children:[Object(s.jsx)("img",{className:"avatar-sm",src:"dist/img/avatars/avatar-female-5.jpg",alt:"avatar"}),Object(s.jsx)("h5",{children:"Karen joye"}),Object(s.jsx)("button",{type:"reset",className:"btn",children:Object(s.jsx)("i",{className:"ti-close"})})]})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{htmlFor:"welcome",children:"Message:"}),Object(s.jsx)("textarea",{className:"text-control",id:"welcome",placeholder:"Send your welcome message...",defaultValue:"Hi Karen joye, I'd like to add you as a contact."})]}),Object(s.jsx)("button",{type:"submit",className:"btn button w-100",children:"Send Friend Request"})]})})]})})})}var be=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){return Object(X.a)(this,a),t.apply(this,arguments)}return Object(Y.a)(a,[{key:"render",value:function(){return Object(s.jsx)(c.Fragment,{children:Object(s.jsx)(je,{})})}}]),a}(c.Component),me="https://secret-zone.herokuapp.com/api/v1";function ue(e,t){return fetch(me+e,function(e){var t=sessionStorage.getItem("access"),a=Object(C.a)({},e);return a.headers=Object(C.a)(Object(C.a)({},a.headers),{},{Authorization:"Bearer ".concat(t)}),a}(t))}console.log(me,"API URL");var he=a(41),Oe=(a(77),he.a.initializeApp({apiKey:"AIzaSyD3wwE9QcuQXFeuZsrGmuLxvKMNQ_IGOxI",authDomain:"absolute-router-287114.firebaseapp.com",databaseURL:"https://absolute-router-287114.firebaseio.com",projectId:"absolute-router-287114",storageBucket:"absolute-router-287114.appspot.com",messagingSenderId:"1028882711156",appId:"1:1028882711156:web:b85d7efece70fb31c40721",measurementId:"G-Q0ESKYSJ4C"}).messaging()),pe=a(42);[].slice.call(document.querySelectorAll('[data-toggle="tooltip"]')).map((function(e){return new pe.a(e)}));function xe(){var e=Object(j.b)();return Object(c.useEffect)((function(){Oe.requestPermission().then(Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getToken();case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}}),e)})))).catch((function(e){console.log("Unable to get permission to notify.",e)})),navigator.serviceWorker.addEventListener("message",(function(e){return console.log(e)}))}),[]),Object(c.useEffect)((function(){e(Q()),ue("/rooms/").then((function(e){return e.json()})).then((function(t){e({type:"save_rooms",payload:t})})).catch((function(e){return console.log(e)}))}),[e]),Object(s.jsxs)("div",{className:"layout",children:[Object(s.jsx)(g,{}),Object(s.jsx)(ae,{}),Object(s.jsx)(de,{}),Object(s.jsx)(be,{})]})}function fe(){var e=Object(c.useState)(""),t=Object(le.a)(e,2),a=t[0],n=t[1],i=Object(c.useState)(""),r=Object(le.a)(i,2),l=r[0],o=r[1],d=Object(c.useState)("password"),b=Object(le.a)(d,2),m=b[0],u=b[1],h=Object(c.useState)(!0),O=Object(le.a)(h,2),p=O[0],x=O[1],f=Object(j.b)(),g=!0===p?"form-control":"form-control is-invalid";return Object(s.jsx)("div",{className:"layout",children:Object(s.jsx)("div",{className:"sign-bg",children:Object(s.jsx)("div",{className:"start",children:Object(s.jsx)("div",{className:"container",children:Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"col-lg-5 col-md-6",children:Object(s.jsxs)("div",{className:"register-content",children:[Object(s.jsxs)("div",{className:"login-header",children:[Object(s.jsx)("div",{className:"logo",children:Object(s.jsx)("img",{src:"/static/dist/img/logo.png",alt:""})}),Object(s.jsxs)("h1",{children:[Object(s.jsx)("i",{className:"ti-key"}),"Sign in"]})]}),Object(s.jsxs)("form",{className:"login-up",onSubmit:function(e){e.preventDefault();var t={username:a,password:l};z.a.post("https://secret-zone.herokuapp.com/api/v1/login/",t).then((function(e){console.log(e.data),200===e.status&&e.data.hasOwnProperty("access")&&(sessionStorage.clear(),sessionStorage.setItem("access",e.data.access),sessionStorage.setItem("refresh",e.data.refresh),f(w(e.data.user)),f(N(e.data.user.id)))})).catch((function(e){e.response&&(console.log(e.response.data),x(Object.values(e.response.data)[0]))})),console.log(t),o("")},children:[Object(s.jsx)("input",{type:"hidden",name:"csrfmiddlewaretoken",defaultValue:"UOgvJymK7DqWsGAvPHK7QVtZnfB1tYCdbZwB4kQ4vuYdQQtI5mzav7DCCrZG8TsZ"}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("input",{onChange:function(e){return n(e.target.value)},value:a,name:"username",type:"text",id:"inputEmail",className:g,placeholder:"Email or Username",autoComplete:"username",required:!0}),Object(s.jsx)("i",{className:"icon ti-email"})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("input",{onChange:function(e){return o(e.target.value)},value:l,name:"password",type:m,id:"inputPassword",className:g,placeholder:"Password",autoComplete:"current-password",required:!0}),Object(s.jsx)("i",{onClick:function(){return u("password"===m?"text":"password")},className:"password"===m?"icon ti-lock":"icon ti-unlock"}),Object(s.jsx)("div",{className:"invalid-feedback",children:p})]}),Object(s.jsx)("input",{type:"submit",className:"btn button",defaultValue:"Login"}),Object(s.jsxs)("div",{className:"callout",children:[Object(s.jsx)("span",{children:"Sign in with"}),Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{children:Object(s.jsx)("a",{href:"#blank",title:"Login with facebook",className:"facebook",children:Object(s.jsx)("i",{className:"ti-facebook"})})}),Object(s.jsx)("li",{children:Object(s.jsx)("a",{href:"#blank",title:"Login with twitter",className:"twitter",children:Object(s.jsx)("i",{className:"ti-twitter"})})}),Object(s.jsx)("li",{children:Object(s.jsx)("a",{href:"#blank",title:"Login with google",className:"google",children:Object(s.jsx)("i",{className:"ti-google"})})})]}),Object(s.jsxs)("span",{children:["Don't have account? ",Object(s.jsx)("a",{href:"/signup/",children:"Create Account"})]})]})]})]})}),Object(s.jsx)("div",{className:"col-lg-7 col-md-6",children:Object(s.jsxs)("div",{className:"page-meta",children:[Object(s.jsx)("h2",{children:"Talkshak is a simplest and friendly interface Messagner or plateform."}),Object(s.jsx)("span",{children:"login now and enjoy!"})]})})]})})})})})}"serviceWorker"in navigator&&navigator.serviceWorker.register("./firebase-messaging-sw.js").then((function(e){console.log("Registration successful, scope is:",e.scope)})).catch((function(e){console.log("Service worker registration failed, error:",e)}));var ge=function(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.auth.isLogin})),a=Object(j.c)((function(e){return e.auth.isLogout})),n=Object(j.c)((function(e){return e.auth.loading})),i=Object(j.c)((function(e){return e.ui.dark_mode}))?Object(s.jsx)("link",{href:"dist/css/dark.css",id:"dark",type:"text/css",rel:"stylesheet"}):"";return Object(c.useEffect)((function(){e((function(e){sessionStorage.getItem("access")?T().then((function(t){200===t.status?(e(k()),e(w(t.data)),e(N(t.data.id))):(console.log("then async:13"),U(e))})).catch((function(t){console.log("catch async:19"),console.log(t.response),U(e)})):P(e)}))}),[e]),Object(s.jsxs)(c.Fragment,{children:[i,Object(s.jsx)("div",{className:"c-loader-wrapper",style:n?{display:"block"}:{display:"none"},children:Object(s.jsx)("div",{className:"c-loader"})}),t?Object(s.jsx)(xe,{}):a?Object(s.jsx)(fe,{}):""]})};a(72),a(73),a(74),a(75);r.a.render(Object(s.jsx)(n.a.StrictMode,{children:Object(s.jsx)(j.a,{store:K,children:Object(s.jsx)(ge,{})})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.54e9bb14.chunk.js.map